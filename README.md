# `gruesome-crayon`

A solution to FizzBuzz abstracted to monogenous partial semigroups.

## Running

```shell
psc-package build
pulp run
```

## Problem

FizzBuzz is a cliché programmer interview test presumably meant to filter out non-programmers. The problem can be given as follows:

> Print the numbers 1-100. Numbers that are multiples of 3 should be replaced with the word "Fizz", multiples of 5 with "Buzz", and multiples of 3 and 5 with "FizzBuzz".

So that the sequence would begin

```
1 2 Fizz 4 Buzz Fizz 7 8 Fizz Buzz 11 Fizz 13 14 FizzBuzz …
```

The usual and expected solution is near trivial and involves the use of the modulo operation.

## Solution Explanation

The numbers `1,2,3,…,100` are conceived of as being the first 100 elements of a string generated by repeated application of the function `λx.x + generator` to the "generator" `1`. Assuming the underlying set to be the mathematical natural numbers (excluding zero), we can describe this structure as a "cyclic [semigroup](https://en.wikipedia.org/wiki/Semigroup)" (or "monogenous semigroup") with the operation being `op : ℤ⁺ × ℤ⁺ → ℤ⁺ = (x, y) ↦ x + y` and the generator `1 ∈ ℤ⁺`. It is then easy to generalize the FizzBuzz problem to anything with this structure: we simply use the generator to generate the string and replace the appropriate elements (i.e. every third, fifth, and fifteenth) according to the rules of the problem.

However, computer integers (or at least standard PureScript `Int`s) are *bounded*, meaning that the limitations of the system produce an upper (and lower) limit to the numbers we can represent with the type. This means that `Int` cannot strictly be used as the foundation of a semigroup, as the operation is required to be total and (for example) `top + 1` is undefined (or at least meaningless for our purposes), where `top` is the upper bound.

Removing the requirement of totality from the semigroup gives us what is called the "semigroupoid" (or "[partial semigroup](https://en.wikipedia.org/wiki/Partial_groupoid#Partial_semigroup)"). Partial operations can be described by the type `a -> a -> Maybe a`, where the use of `Maybe` indicates that the operation may "produce" `Nothing` for some combination of arguments. Applying this structure to the FizzBuzz problem works, but comes with a small catch: at some point the generator may "generate" `Nothing` (indeed, that was the motivation behind moving to partial semigroups in the first place) so a choice needs to be made as to what this means for the final sequence. In the case of positive `Int`s, for example, `…, top, top + 1, top + 2, …` can yield in the end either `…, top, Nothing, "Fizz", …` or `…, top, Nothing, Nothing, …` since `top + 2` is a "multiple of 3" in the sense that its index (2147483649) in the sequence is a multiple of 3, even though `top + 2` is itself undefined. This program assumes that a `Nothing` value indicates the logical end of the sequence, and so no "Fizz", "Buzz", or "FizzBuzz" will be produced after (or replace) a `Nothing`.

## Potential Improvements

* The sequence is output as (e.g.) `(Just (Blop 11))` instead of simply as `11`. Depending on the strictness of the hypothetical interviewer, this may not be acceptable. This can be corrected by unwrapping the `Maybe` and providing a handwritten instance for `Show (FB a)`.

## Expected Output

```
(Just (Blop 1))
(Just (Blop 2))
(Just Fizz)
(Just (Blop 4))
(Just Buzz)
(Just Fizz)
(Just (Blop 7))
(Just (Blop 8))
(Just Fizz)
(Just Buzz)
(Just (Blop 11))
(Just Fizz)
(Just (Blop 13))
(Just (Blop 14))
(Just FizzBuzz)
(Just (Blop 16))
(Just (Blop 17))
(Just Fizz)
(Just (Blop 19))
(Just Buzz)
(Just Fizz)
(Just (Blop 22))
(Just (Blop 23))
(Just Fizz)
(Just Buzz)
(Just (Blop 26))
(Just Fizz)
(Just (Blop 28))
(Just (Blop 29))
(Just FizzBuzz)
(Just (Blop 31))
(Just (Blop 32))
(Just Fizz)
(Just (Blop 34))
(Just Buzz)
(Just Fizz)
(Just (Blop 37))
(Just (Blop 38))
(Just Fizz)
(Just Buzz)
(Just (Blop 41))
(Just Fizz)
(Just (Blop 43))
(Just (Blop 44))
(Just FizzBuzz)
(Just (Blop 46))
(Just (Blop 47))
(Just Fizz)
(Just (Blop 49))
(Just Buzz)
(Just Fizz)
(Just (Blop 52))
(Just (Blop 53))
(Just Fizz)
(Just Buzz)
(Just (Blop 56))
(Just Fizz)
(Just (Blop 58))
(Just (Blop 59))
(Just FizzBuzz)
(Just (Blop 61))
(Just (Blop 62))
(Just Fizz)
(Just (Blop 64))
(Just Buzz)
(Just Fizz)
(Just (Blop 67))
(Just (Blop 68))
(Just Fizz)
(Just Buzz)
(Just (Blop 71))
(Just Fizz)
(Just (Blop 73))
(Just (Blop 74))
(Just FizzBuzz)
(Just (Blop 76))
(Just (Blop 77))
(Just Fizz)
(Just (Blop 79))
(Just Buzz)
(Just Fizz)
(Just (Blop 82))
(Just (Blop 83))
(Just Fizz)
(Just Buzz)
(Just (Blop 86))
(Just Fizz)
(Just (Blop 88))
(Just (Blop 89))
(Just FizzBuzz)
(Just (Blop 91))
(Just (Blop 92))
(Just Fizz)
(Just (Blop 94))
(Just Buzz)
(Just Fizz)
(Just (Blop 97))
(Just (Blop 98))
(Just Fizz)
(Just Buzz)
```
